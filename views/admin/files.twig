{% extends "../_layout-admin.twig" %}

{% block title %}Files{% endblock %}

{% block layoutClass %}admin{% endblock %}

{% block content %}
  <section class="content" role="main">

    <h1 class="page-title">
      <span class="page-title__container">
        Files
        {% if filePath %}
          <span class="page-title__links">{{ filePath }}</span>
        {% endif %}
      </span>
    </h1>

    <div class="file-upload">
      <form method="POST" class="file-upload__form" enctype="multipart/form-data">
        <label for="files">Upload files</label>
        <input type="file" name="files" id="files" multiple="multiple" />
        <button type="submit" class="button">Upload</button>
      </form>
    </div>

    <div class="create-folder">
      <form method="POST" class="create-folder__form">
        <label for="folderName">Create a new folder</label>
        <input type="text" name="folderName" id="folderName" />
        <button type="submit" class="button">Create</button>
      </form>
    </div>

    <ul class="file-list file-list--grid">
      {% if parentPath %}
        <li class="file-list__item">
          <a class="file-list__preview" href="{{ parentPath }}">
            <div class="file-list__folder">
              <img src="/static/dist/images/folder-up.svg" alt="Up one level" />
            </div>
            <span class="file-list__name">..</span>
          </a>
        </li>
      {% endif %}

      {% for folder in folders %}
        <li class="file-list__item">
          <a class="file-list__preview" href="{{ folderPath }}{{ folder.filename }}">
            <div class="file-list__folder">
              <img src="/static/dist/images/folder.svg" alt="Navigate to folder:" />
            </div>
            <span class="file-list__name">{{ folder.filename }}</span>
          </a>
        </li>
      {% endfor %}

      {% for file in files %}
        <li class="file-list__item">
          <a href="{{ filePath }}{{ file.filename }}" target="_blank" class="file-list__preview">
            {% if file.isImage %}
              <img src="{{ filePath }}{{ file.filename }}" alt="" />
            {% endif %}
            <span class="file-list__name">{{ file.filename }}</span>
          </a>
          <a href="/admin/files/delete{{ filePath }}{{ file.filename }}" class="file-list__delete"><img src="/static/dist/images/icon-x.svg" alt="Delete this image" title="Delete" /></a>
        </li>
      {% endfor %}
    </ul>

  </section>
{% endblock %}
